--- a/scripts/feeds
+++ b/scripts/feeds
@@ -207,6 +207,35 @@ sub update_feed_via($$$$$$$) {
 	my $rebase = shift;
 	my $stash = shift;
 
+	# 重试逻辑
+	for my $retry (1..3) {
+		warn "Attempt $retry/3 for feed '$name'\n" if $retry > 1;
+		
+		# 调用原始函数逻辑
+		my $result = update_feed_via_original($type, $name, $src, $relocate, $force, $rebase, $stash);
+		
+		if ($result == 0) {
+			return 0;  # 成功
+		}
+		
+		if ($retry < 3) {
+			warn "Failed, retrying in 3 seconds...\n";
+			sleep(3);
+		}
+	}
+	
+	return 1;  # 所有重试都失败
+}
+
+sub update_feed_via_original($$$$$$$) {
+	my $type = shift;
+	my $name = shift;
+	my $src = shift;
+	my $relocate = shift;
+	my $force = shift;
+	my $rebase = shift;
+	my $stash = shift;
+
 	my $m = $update_method{$type};
 	my $localpath = "./feeds/$name";
 	my $safepath = $localpath;
